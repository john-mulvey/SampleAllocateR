% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/batch_allocatoR_refactored.R
\name{allocate_single_random}
\alias{allocate_single_random}
\title{Allocate Samples to Batches with Random Allocation (Internal Function)}
\usage{
allocate_single_random(data, batch_size, blocking_variable = NA)
}
\arguments{
\item{data}{A data.frame containing the dataset to be allocated. Must include a sample_id column.}

\item{batch_size}{Integer specifying the size of each batch.}

\item{blocking_variable}{Optional string specifying the blocking variable column name.
If NA or missing, no blocking is applied.}
}
\value{
A list with two elements:
\itemize{
\item layout: data.frame with batch_allocation column added (may include padding rows)
\item results: data.frame with covariate balance test results
}
}
\description{
This function randomly allocates samples to batches, with support for blocking variables
including unequal block sizes (using a bin-packing algorithm).
}
\details{
Handles three scenarios:

\strong{Case 1: No blocking variable}
Samples are randomly allocated to batches without constraints.

\strong{Case 2a: Blocking variable with equal block size}
Whole blocks are randomly assigned to batches, keeping samples within blocks together.

\strong{Case 2b: Blocking variable with unequal block size}
Uses first-fit bin-packing algorithm to assign blocks to batches while keeping blocks intact.
Blocks are randomized before packing. This siutation requires a trade-off between bin packing efficiency and randomness
in generating the layout, and so in some cases can use more batches than the minimum possible number.
}
\keyword{internal}
