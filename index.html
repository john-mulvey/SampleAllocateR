<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Covariate Balanced Allocation of Preselected Samples to Experimental Batches • SampleAllocateR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Covariate Balanced Allocation of Preselected Samples to Experimental Batches">
<meta name="description" content="Allocates a set of pre-selected samples to experimental batches, in a way that seeks to maximise the balance of a specified set of covariates across the batches whilst also allowing blocking of samples if desired. This will allow for downstream batch correction to be performed without confounding with experimentally relevant covariates. We envision the primary use case to be for -omics experiments of a large number of clinical samples, but the methods are broadly applicable to any type of assay or other situations where the value of potentially confounding covaraites are measured for each experimental unit.">
<meta property="og:description" content="Allocates a set of pre-selected samples to experimental batches, in a way that seeks to maximise the balance of a specified set of covariates across the batches whilst also allowing blocking of samples if desired. This will allow for downstream batch correction to be performed without confounding with experimentally relevant covariates. We envision the primary use case to be for -omics experiments of a large number of clinical samples, but the methods are broadly applicable to any type of assay or other situations where the value of potentially confounding covaraites are measured for each experimental unit.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">SampleAllocateR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/methods_for_sample_allocation_to_batches.html">Methods for Allocating Samples to Batches</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<p>This repository contains the <strong>SampleAllocateR</strong> package: a tool designed to optimally allocate samples with known covariates to experimental batches.</p>
<p>For more information about the method, please see our <a href="https://doi.org/10.1101/2025.03.21.644523" class="external-link">preprint on bioRxiv</a>.</p>
<div class="section level1">
<div class="page-header"><h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1></div>
<p>To install the latest version:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if required, install remotes package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># install package from github</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"https://github.com/john-mulvey/SampleAllocateR"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Note that building vignettes is currently slow, but that it is not possible to supply them pre-built when installing the pacakge from github. If you would rather not wait, the vignette can be viewed <a href="https://john-mulvey.github.io/SampleAllocateR/">on the package website</a></p>
</div>
<div class="section level1">
<h1 id="quick-start-guide">Quick Start Guide<a class="anchor" aria-label="anchor" href="#quick-start-guide"></a>
</h1>
<p>In order to generate a layout with the optimal balance of covariates between experimental batches:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">optimal_layout_blocked</span> <span class="op">=</span> <span class="fu"><a href="reference/allocate_samples.html">allocate_samples</a></span><span class="op">(</span><span class="va">toy_data</span>, </span>
<span>                                 batch_size <span class="op">=</span> <span class="fl">13</span>, </span>
<span>                                 covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"covariate1"</span>, <span class="st">"covariate2"</span>, <span class="st">"covariate3"</span><span class="op">)</span>,</span>
<span>                                 blocking_variable <span class="op">=</span> <span class="st">"block_id"</span>,</span>
<span>                                 iterations <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                                 method <span class="op">=</span> <span class="st">"simulated_annealing"</span><span class="op">)</span></span></code></pre></div>
<p>The resulting object contains - the original input data supplied, with the allocated batch appended - results of testing the balance of each covariate between batches - data for the optimisation process to confirm that the method has converged, if the method used was the default “simulated_annealing”</p>
<p>As a simple sanity check, the values of the covariates can be visualised using the <code>plot_layout</code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_layout.html">plot_layout</a></span><span class="op">(</span><span class="va">optimal_layout_blocked</span>, covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"covariate1"</span>, <span class="st">"covariate2"</span>, <span class="st">"covariate3"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The allocated layout can be saved to file, for example by:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">optimal_layout_blocked</span><span class="op">[[</span><span class="st">"layout"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"optimal_layout.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing SampleAllocateR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>John Mulvey <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-3843-2442" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/john-mulvey/SampleAllocateR/actions/workflows/check-standard.yaml" class="external-link"><img src="https://github.com/john-mulvey/SampleAllocateR/actions/workflows/check-standard.yaml/badge.svg" alt="R-CMD-check.yaml"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/862976979" class="external-link"><img src="https://zenodo.org/badge/862976979.svg" alt="DOI"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Mulvey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
